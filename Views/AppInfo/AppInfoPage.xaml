<?xml version="1.0" encoding="UTF-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui" 
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
             xmlns:c="clr-namespace:SpiritualGiftsTest.Controls;assembly=SpiritualGiftsTest.Maui"
             xmlns:ios="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.iOSSpecific;assembly=Microsoft.Maui.Controls"
             xmlns:cmp="clr-namespace:Microsoft.Maui.Controls.Compatibility;assembly=Microsoft.Maui.Controls"
             ios:NavigationPage.HideNavigationBarSeparator="true"
             NavigationPage.HasBackButton="False"
             x:Class="SpiritualGiftsTest.Views.AppInfo.AppInfoPage"
             FlowDirection="{Binding FlowDirection}">

    <NavigationPage.TitleView>
        <StackLayout Orientation="Horizontal" HorizontalOptions="Fill" BackgroundColor="Transparent">
            <ImageButton x:Name="BackArrow"
                         HorizontalOptions="Start"
                         VerticalOptions="CenterAndExpand"
                         BackgroundColor="Transparent"
                         WidthRequest="50"
                         HeightRequest="25"
                         Source="{StaticResource BackArrow}"
                         Command="{Binding NavButtonCommand}" />
            <c:TitleLabel NewStyle="{StaticResource NavTitleLabelStyle}"
                          HorizontalOptions="Fill"
                          FlowDirection="{Binding FlowDirection}"
                          LabelText="{Binding PageTopic}" />
            <ImageButton x:Name="BackArrowRight"
                         HorizontalOptions="End"
                         VerticalOptions="CenterAndExpand"
                         BackgroundColor="Transparent"
                         WidthRequest="50"
                         HeightRequest="25"
                         IsVisible="False"
                         IsEnabled="False"
                         Source="{StaticResource BackArrowRight}"
                         Command="{Binding NavButtonCommand}" />
        </StackLayout>
    </NavigationPage.TitleView>

    <ContentPage.Content>
        <cmp:RelativeLayout>
            
            <Image Source="mainpagebackground"
                   VerticalOptions="FillAndExpand"
                   HorizontalOptions="FillAndExpand"
                   Aspect="Fill"
                   cmp:RelativeLayout.XConstraint="0"
                   cmp:RelativeLayout.YConstraint="0"
                   cmp:RelativeLayout.WidthConstraint="{cmp:ConstraintExpression Type=RelativeToParent, Property=Width, Factor=1}"
                   cmp:RelativeLayout.HeightConstraint="{cmp:ConstraintExpression Type=RelativeToParent, Property=Height, Factor=1}" />

            <ScrollView cmp:RelativeLayout.XConstraint="0"
                        cmp:RelativeLayout.YConstraint="40"
                        cmp:RelativeLayout.WidthConstraint="{cmp:ConstraintExpression Type=RelativeToParent, Property=Width, Factor=1}"
                        cmp:RelativeLayout.HeightConstraint="{cmp:ConstraintExpression Type=RelativeToParent, Property=Height, Factor=1, Constant=-40}">

                <StackLayout VerticalOptions="Start" HorizontalOptions="FillAndExpand" Margin="0,100,0,0">
                    <c:TitleLabel NewStyle="{StaticResource AppInfoLabel}"
                                  LabelText="{Binding CreatedBy}" />
                    <Label Style="{StaticResource AppInfoDetailLabel}" 
                           Text="{Binding RevLong}" />
                    <Label x:Name="longEmail"
                           Style="{StaticResource AppInfoDetailLabel}"
                           Text="{Binding RevLongEmail}"
                           TextColor="{StaticResource DodgerBlue}">
                        <Label.GestureRecognizers>
                             <TapGestureRecognizer Command="{Binding EmailCommand}" 
                                                   NumberOfTapsRequired="1" 
                                                   CommandParameter="{Binding RevLongEmail}" />
                        </Label.GestureRecognizers>
                    </Label>

                    <c:TitleLabel NewStyle="{StaticResource AppInfoLabel}"
                                  LabelText="{Binding DevelopedBy}" />
                    <Label Style="{StaticResource AppInfoDetailLabel}" 
                           Text="{Binding RevSmith}" />
                    <Label Style="{StaticResource AppInfoDetailLabel}" 
                           Text="{Binding AppSmiths}" />
                    <Label x:Name="smithEmail"
                           Style="{StaticResource AppInfoDetailLabel}"
                           Text="{Binding RevSmithEmail}"
                           TextColor="{StaticResource DodgerBlue}">
                        <Label.GestureRecognizers>
                             <TapGestureRecognizer Command="{Binding EmailCommand}" 
                                                   NumberOfTapsRequired="1" 
                                                   CommandParameter="{Binding RevSmithEmail}" />
                        </Label.GestureRecognizers>
                    </Label>
                </StackLayout>
            </ScrollView>
        </cmp:RelativeLayout>
    </ContentPage.Content>
</ContentPage>
