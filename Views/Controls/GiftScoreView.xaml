<?xml version="1.0" encoding="utf-8" ?>
<ContentView 
    x:Class="SpiritualGiftsSurvey.Views.Controls.GiftScoreView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:SpiritualGiftsSurvey.Views.Controls"
    x:DataType="vm:GiftScoreViewModel"
    x:Name="Root">

    <Border x:Name="GiftScore" 
            StrokeThickness="2"
            Stroke="DarkSlateGray"
            BackgroundColor="White"
            Padding="{OnIdiom Phone=5, Tablet=10}"
            Margin="{OnIdiom Phone='0,4', Tablet='0,8'}"
            StrokeShape="RoundRectangle 8">

        <VerticalStackLayout Spacing="{OnIdiom Phone=8, Tablet=16}">

            <Grid ColumnDefinitions="*,Auto" Margin="{OnIdiom Phone='10,6,10,0', Tablet='20,12,20,0'}">
                <Label Text="{Binding GiftName}"
                       FontSize="{OnIdiom Phone=24, Tablet=32}"
                       TextColor="Black"
                       VerticalOptions="Center" />

                <Grid Grid.Column="1" ColumnSpacing="{OnIdiom Phone=6, Tablet=12}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="{OnIdiom Phone=30, Tablet=60}" />
                    </Grid.ColumnDefinitions>

                    <ImageButton 
                        Grid.Column="0"
                        IsVisible="{Binding ShowMedal}"
                        Source="{StaticResource Medal}"
                        BackgroundColor="{Binding MedalColor}"
                        HeightRequest="{OnIdiom Phone=36, Tablet=64}"
                        WidthRequest="{OnIdiom Phone=36, Tablet=64}"
                        Padding="{OnIdiom Phone='7,9,7,7', Tablet='12'}"
                        CornerRadius="{OnIdiom Phone=18, Tablet=32}"
                        VerticalOptions="Center"
                        HorizontalOptions="Center"
                        BorderWidth="0"
                        InputTransparent="True" />

                    <Label Grid.Column="1"
                           Text="{Binding Score}"
                           FontSize="{OnIdiom Phone=24, Tablet=32}"
                           TextColor="Black"
                           VerticalOptions="Center"
                           VerticalTextAlignment="Center"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center" />
                </Grid>
            </Grid>

            <!-- Custom inline progress bar -->
            <Grid x:Name="BarContainer"
                  HeightRequest="{OnIdiom Phone=12, Tablet=24}"
                  HorizontalOptions="Fill"
                  BackgroundColor="Transparent"
                  VerticalOptions="Center"
                  Margin="{OnIdiom Phone='10,0,10,6', Tablet='20,4,20,12'}">

                <!-- Track -->
                <BoxView Color="{StaticResource AzureBlue}"
                         CornerRadius="{OnIdiom Phone=4, Tablet=6}"
                         HorizontalOptions="Fill"
                         VerticalOptions="Fill" />

                <!-- Fill -->
                <BoxView x:Name="ProgressFill"
                         Color="{StaticResource EmeraldGreen}"
                         CornerRadius="{OnIdiom Phone=4, Tablet=6}"
                         VerticalOptions="Fill"
                         HorizontalOptions="Start"
                         WidthRequest="0" />
            </Grid>
                     
        </VerticalStackLayout>
    </Border>
</ContentView>
